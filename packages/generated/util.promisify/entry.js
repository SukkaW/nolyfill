"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(exports,{customPromisifyArgs:function(){return l},default:function(){return f}});const t=require("@nolyfill/shared"),r=(e=require("@nolyfill/safe-array-concat"))&&e.__esModule?e:{default:e},o=Symbol.for("nodejs.util.promisify.custom"),i=Symbol("customPromisifyArgs");// eslint-disable-next-line @typescript-eslint/ban-types -- overload signature
function n(e){if("function"!=typeof e){let e=TypeError('The "original" argument must be of type function');throw e.code="ERR_INVALID_ARG_TYPE",e.toString=function(){return`${this.name}[${this.code}]: ${this.message}`},e}if(o in e&&e[o]){let t=e[o];if("function"!=typeof t){let e=TypeError("The [util.promisify.custom] property must be of type function.");throw e.code="ERR_INVALID_ARG_TYPE",e.toString=function(){return`${this.name}[${this.code}]: ${this.message}`},e}return Object.defineProperty(t,o,{configurable:!0,enumerable:!1,value:t,writable:!1}),t}// Names to create an object from in case the callback receives multiple
// arguments, e.g. ['stdout', 'stderr'] for child_process.exec.
let t=i in e&&e[i],n=function(...o){// eslint-disable-next-line @typescript-eslint/no-this-alias -- wrap fn
let i=this;return new Promise((n,f)=>{e.apply(i,(0,r.default)(o,e=>{let r=o.length>1?o.slice(1):[];if(e)f(e);else if(t&&void 0!==t&&r.length>1){let e={};Array.prototype.forEach.call(t,(t,o)=>{e[t]=r[o]}),n(e)}else n(r[0])}))})};Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperty(n,o,{configurable:!0,enumerable:!1,value:n,writable:!1});let f=Object.getOwnPropertyDescriptors(e);return Array.prototype.forEach.call(f,(e,t)=>{try{Object.defineProperty(n,e,t)}catch(e){// handle nonconfigurable function properties
}}),n}n.custom=o;const f=(0,t.defineEsShim)(n,!0),l=i;
Object.assign(exports.default, exports); module.exports = exports.default;
